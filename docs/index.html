<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>modp10</title><meta name="description" content="Documentation for modp10"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">modp10</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h2>modp10</h2></div><div class="tsd-panel tsd-typography"><p><a href="https://classroom.github.com/a/CaXtHsbh"><img src="https://classroom.github.com/assets/deadline-readme-button-24ddc0f5d75046c5622901739e7c5dd533143b0c8e959d652212380cedb1ea36.svg" alt="Review Assignment Due Date"></a></p>
<a id="md:práctica-13---dsikea-api-rest-con-nodeexpress" class="tsd-anchor"></a><h1><a href="#md:práctica-13---dsikea-api-rest-con-nodeexpress">Práctica 13 - DSIkea: API REST con Node/Express</a></h1><p><a href="https://sonarcloud.io/summary/new_code?id=ULL-ESIT-INF-DSI-2324_ull-esit-inf-dsi-23-24-prct13-dsikea-api-groupb"><img src="https://sonarcloud.io/api/project_badges/measure?project=ULL-ESIT-INF-DSI-2324_ull-esit-inf-dsi-23-24-prct13-dsikea-api-groupb&metric=alert_status" alt="Quality Gate Status"></a></p>
<a id="md:integrantes-del-grupo" class="tsd-anchor"></a><h2><a href="#md:integrantes-del-grupo">Integrantes del Grupo</a></h2><ul>
<li>Adahi Oval Afonso (<a href="mailto:alu0101242071@ull.edu.es">alu0101242071@ull.edu.es</a>)</li>
<li>David Ezequiel Tolosa Cabalero (<a href="mailto:alu0101479507@ull.edu.es">alu0101479507@ull.edu.es</a>)</li>
<li>Francisco David Hernández Alayón (<a href="mailto:alu0101469898@ull.edu.es">alu0101469898@ull.edu.es</a>)</li>
</ul>
<br>

<a id="md:introducción" class="tsd-anchor"></a><h2><a href="#md:introducción">Introducción</a></h2><p>El objetivo de esta práctica es el desarrollo de una API REST para la gestión de una tienda de muebles, que permite realizar operaciones <strong>CRUD</strong> (<em>Create, Read, Update, Delete</em>). Para ello se han desarrollado diferentes modelos y schemas, para modelar los datos de la API y diferentes rutas para las diferentes funcionalidades de la misma. Se hace uso del módulo <code>mongoose</code> para el tratamiento con la base de datos de <code>MongoDB</code>, así como del paquete <code>express</code> para las diferentes rutas y gestión de peticiones de la API. Para permitir el modelado de datos en los schema se han utilizado funcionalidades del paquete <code>validator</code> y para el desarrollo dirigido por pruebas se ha utilizado <code>mocha</code> y <code>chai</code>. También se ha implementado la integración continua mediante <code>Github Actions</code> y el control de calidad del código se ha hecho mediante el uso de <code>SonarCloud</code> y <code>Coveralls</code>.</p>
<br>

<a id="md:modelos" class="tsd-anchor"></a><h2><a href="#md:modelos">Modelos</a></h2><p>Para el desarrollo de las rutas y las funcionalidades de la API se han creado diferentes modelos de datos para los diferentes tipos de objetos que se guardarán en la base de datos de una tienda de muebles, haciendo uso de <code>model</code> y <code>Schema</code> dentro del módulo <code>mongoose</code>. Estos modelos son:</p>
<ul>
<li>Customer</li>
<li>Provider</li>
<li>Furniture</li>
<li>Transaction</li>
</ul>
<a id="md:customer" class="tsd-anchor"></a><h3><a href="#md:customer">Customer</a></h3><p>Para el desarrollo se ha creado el modelo <code>Customer</code> a partir del esquema <code>CustomerSchema</code>, que a su vez ha sido creado a partir de la interfaz <code>CustomerDocumentInterface</code> que extiende la interfaz <code>Document</code> proporcionada por <code>mongoose</code>. Veamos esta última interfaz:</p>
<pre><code class="language-typescript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">interface</span><span class="hl-1"> </span><span class="hl-3">CustomerDocumentInterface</span><span class="hl-1"> </span><span class="hl-2">extends</span><span class="hl-1"> </span><span class="hl-3">Document</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">nif</span><span class="hl-1"> : </span><span class="hl-3">string</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">name</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">phone</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">address</span><span class="hl-1">: </span><span class="hl-3">string</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<p>Esta interfaz define los campos que tendrá nuestro <strong>schema</strong>, y por tanto la información que será guardada de cada cliente. En nuestro caso son 4: el nif, el nombre, el teléfono y la dirección. Estos campos se limitan y estipulan en el <strong>schema</strong> de la siguiente manera:</p>
<pre><code class="language-typescript"><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-5">CustomerSchema</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">Schema</span><span class="hl-1">&lt;</span><span class="hl-3">CustomerDocumentInterface</span><span class="hl-1">&gt;({</span><br/><br/><span class="hl-1">  </span><span class="hl-4">nif:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-4">String</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">unique:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">required:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">trim:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-6">validate</span><span class="hl-4">:</span><span class="hl-1"> (</span><span class="hl-4">value</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> { </span><span class="hl-7">// VER SI ESTO COMPRUEBA NIF</span><br/><span class="hl-1">      </span><span class="hl-0">if</span><span class="hl-1"> (!</span><span class="hl-4">validator</span><span class="hl-1">.</span><span class="hl-6">isIdentityCard</span><span class="hl-1">(</span><span class="hl-4">value</span><span class="hl-1">, </span><span class="hl-8">&#39;ES&#39;</span><span class="hl-1">)) {</span><br/><span class="hl-1">        </span><span class="hl-0">throw</span><span class="hl-1"> </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">Error</span><span class="hl-1">(</span><span class="hl-8">&#39;NIF should be a valid one(12345678A)&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  },</span><br/><br/><span class="hl-1">  </span><span class="hl-4">name:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-4">String</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">required:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">trim:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-6">validate</span><span class="hl-4">:</span><span class="hl-1"> (</span><span class="hl-4">value</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">if</span><span class="hl-1"> (!</span><span class="hl-4">validator</span><span class="hl-1">.</span><span class="hl-6">isAlpha</span><span class="hl-1">(</span><span class="hl-4">value</span><span class="hl-1">)) {</span><br/><span class="hl-1">        </span><span class="hl-0">throw</span><span class="hl-1"> </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">Error</span><span class="hl-1">(</span><span class="hl-8">&#39;Name should contain only characters&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  },</span><br/><br/><span class="hl-1">  </span><span class="hl-4">phone:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-4">String</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">required:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">trim:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-6">validate</span><span class="hl-4">:</span><span class="hl-1"> (</span><span class="hl-4">value</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">if</span><span class="hl-1"> (!</span><span class="hl-4">validator</span><span class="hl-1">.</span><span class="hl-6">isMobilePhone</span><span class="hl-1">(</span><span class="hl-4">value</span><span class="hl-1">)) {</span><br/><span class="hl-1">        </span><span class="hl-0">throw</span><span class="hl-1"> </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">Error</span><span class="hl-1">(</span><span class="hl-8">&#39;Phone should be a valid one&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  },</span><br/><br/><span class="hl-1">  </span><span class="hl-4">address:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-4">String</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">required:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">trim:</span><span class="hl-1"> </span><span class="hl-2">true</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">})</span>
</code><button>Copy</button></pre>
<p>El nif es de tipo string y será único(<code>unique: true</code>) en toda la base de datos ademas aprovechamos la función <em>validate</em> que comprueba si es un <em>identity card</em> de españa(<code>!validator.isIdentityCard(value, &#39;ES&#39;)</code>). El nombre es una string en cual quitamos los espacios innecesarios(<code>trim: true</code>) y comprobamos que solo contega carácteres alfanuméricos(<code>!validator.isAlpha(value)</code>). El teléfono es una string en el que quitamos los espacios sobrantes y comprobamos que sea un número de teléfono válido(<code>!validator.isMobilePhone(value)</code>). Por último, la dirección será una string y, al igual que los demás atributos, sera obligatoria tenerla(<code>required: true</code>).</p>
<p>Tras el desarrollo del <code>Schema</code> se crea el modelo haciendo uso del mismo:</p>
<pre><code class="language-typescript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-5">Customer</span><span class="hl-1"> = </span><span class="hl-6">model</span><span class="hl-1">&lt;</span><span class="hl-3">CustomerDocumentInterface</span><span class="hl-1">&gt;(</span><span class="hl-8">&#39;Customer&#39;</span><span class="hl-1">, </span><span class="hl-4">CustomerSchema</span><span class="hl-1">)</span>
</code><button>Copy</button></pre>
<a id="md:provider" class="tsd-anchor"></a><h3><a href="#md:provider">Provider</a></h3><p>El <em>Provider</em> es muy parecido al customer, para esto se ha creado el modelo <code>Provider</code> a partir del esquema <code>ProviderSchema</code>, que a su vez ha sido creado a partir de la interfaz <code>ProviderDocumentInterface</code> que extiende la interfaz <code>Document</code> proporcionada por <code>mongoose</code>. Veamos esta última interfaz:</p>
<pre><code class="language-typescript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">interface</span><span class="hl-1"> </span><span class="hl-3">ProviderDocumentInterface</span><span class="hl-1"> </span><span class="hl-2">extends</span><span class="hl-1"> </span><span class="hl-3">Document</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">cif</span><span class="hl-1"> : </span><span class="hl-3">string</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">name</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">phone</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">address</span><span class="hl-1">: </span><span class="hl-3">string</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<p>Esta interfaz define los campos que tendrá nuestro <strong>schema</strong>, y por tanto la información que será guardada de cada cliente. En nuestro caso son 4: el cif(<em>la única diferencia que tiene con el Customer</em>), el nombre, el teléfono y la dirección. Estos campos se limitan y estipulan en el <strong>schema</strong> de la siguiente manera:</p>
<pre><code class="language-typescript"><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-5">ProviderSchema</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">Schema</span><span class="hl-1">&lt;</span><span class="hl-3">ProviderDocumentInterface</span><span class="hl-1">&gt;({</span><br/><span class="hl-1">  </span><span class="hl-4">cif:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-4">String</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">unique:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">required:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">trim:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-6">validate</span><span class="hl-4">:</span><span class="hl-1"> (</span><span class="hl-4">value</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-5">cifRegex</span><span class="hl-1"> =</span><span class="hl-9"> /</span><span class="hl-10">^</span><span class="hl-11">[</span><span class="hl-9">A-HJNPQRSUVW</span><span class="hl-11">]</span><span class="hl-12">{1}</span><span class="hl-11">[</span><span class="hl-9">0-9</span><span class="hl-11">]</span><span class="hl-12">{7}</span><span class="hl-11">[</span><span class="hl-9">0-9A-J</span><span class="hl-11">]</span><span class="hl-10">$</span><span class="hl-9">/</span><span class="hl-1">;</span><br/><br/><span class="hl-1">      </span><span class="hl-0">if</span><span class="hl-1"> (!</span><span class="hl-4">cifRegex</span><span class="hl-1">.</span><span class="hl-6">test</span><span class="hl-1">(</span><span class="hl-4">value</span><span class="hl-1">)) {</span><br/><span class="hl-1">        </span><span class="hl-0">throw</span><span class="hl-1"> </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">Error</span><span class="hl-1">(</span><span class="hl-8">&#39;CIF not valid.&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-4">name:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-4">String</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">required:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">trim:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-6">validate</span><span class="hl-4">:</span><span class="hl-1"> (</span><span class="hl-4">value</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">if</span><span class="hl-1"> (!</span><span class="hl-4">validator</span><span class="hl-1">.</span><span class="hl-6">isAlpha</span><span class="hl-1">(</span><span class="hl-4">value</span><span class="hl-1">)) {</span><br/><span class="hl-1">        </span><span class="hl-0">throw</span><span class="hl-1"> </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">Error</span><span class="hl-1">(</span><span class="hl-8">&#39;Name should contain only characters&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  },</span><br/><br/><span class="hl-1">  </span><span class="hl-4">phone:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-4">String</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">required:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">trim:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-6">validate</span><span class="hl-4">:</span><span class="hl-1"> (</span><span class="hl-4">value</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">if</span><span class="hl-1"> (!</span><span class="hl-4">validator</span><span class="hl-1">.</span><span class="hl-6">isMobilePhone</span><span class="hl-1">(</span><span class="hl-4">value</span><span class="hl-1">)) {</span><br/><span class="hl-1">        </span><span class="hl-0">throw</span><span class="hl-1"> </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">Error</span><span class="hl-1">(</span><span class="hl-8">&#39;Phone should be a valid one&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  },</span><br/><br/><span class="hl-1">  </span><span class="hl-4">address:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-4">String</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">required:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">trim:</span><span class="hl-1"> </span><span class="hl-2">true</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">})</span>
</code><button>Copy</button></pre>
<p>Como podemos observar, sigue el mismo esquema que <em>Customer</em> salvo que el nif se sustituye por el cif, aunque siguen las mismas reglas. Tras el desarrollo del <code>Schema</code> se crea el modelo haciendo uso del mismo:</p>
<pre><code class="language-typescript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-5">Provider</span><span class="hl-1"> = </span><span class="hl-6">model</span><span class="hl-1">&lt;</span><span class="hl-3">ProviderDocumentInterface</span><span class="hl-1">&gt;(</span><span class="hl-8">&#39;Provider&#39;</span><span class="hl-1">, </span><span class="hl-4">ProviderSchema</span><span class="hl-1">)</span>
</code><button>Copy</button></pre>
<a id="md:furniture" class="tsd-anchor"></a><h3><a href="#md:furniture">Furniture</a></h3><p>Para el desarrollo se ha creado el modelo <code>Furniture</code> a partir del esquema <code>FurnitureSchema</code>, que a su vez ha sido creado a partir de la interfaz <code>FurnitureDocumentInterface</code> que extiende la interfaz <code>Document</code> proporcionada por <code>mongoose</code>. Veamos esta última interfaz:</p>
<pre><code class="language-typescript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">interface</span><span class="hl-1"> </span><span class="hl-3">FurnituresDocumentInterface</span><span class="hl-1"> </span><span class="hl-2">extends</span><span class="hl-1"> </span><span class="hl-3">Document</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">name</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">desc</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">color</span><span class="hl-1">: </span><span class="hl-8">&#39;blue&#39;</span><span class="hl-1"> | </span><span class="hl-8">&#39;red&#39;</span><span class="hl-1"> |</span><span class="hl-8">&#39;green&#39;</span><span class="hl-1"> | </span><span class="hl-8">&#39;black&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">price</span><span class="hl-1">: </span><span class="hl-3">number</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<p>Esta interfaz define los campos que tendrá nuestro <strong>schema</strong>, y por tanto la información que será guardada de cada mueble. En nuestro caso son 4: el nombre, la descripción, el color (<em>que tiene parámetros predefinidos</em>) y el precio. Estos campos se limitan y estipulan en el <strong>schema</strong> de la siguiente manera:</p>
<pre><code class="language-typescript"><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-5">FurnitureSchema</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">Schema</span><span class="hl-1">&lt;</span><span class="hl-3">FurnituresDocumentInterface</span><span class="hl-1">&gt;({</span><br/><span class="hl-1">  </span><span class="hl-4">name:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-4">String</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">required:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">trim:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-6">validate</span><span class="hl-4">:</span><span class="hl-1"> (</span><span class="hl-4">value</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">if</span><span class="hl-1">(!</span><span class="hl-4">validator</span><span class="hl-1">.</span><span class="hl-6">isAlpha</span><span class="hl-1">(</span><span class="hl-4">value</span><span class="hl-1">.</span><span class="hl-6">replace</span><span class="hl-1">(</span><span class="hl-9">/\s/</span><span class="hl-2">g</span><span class="hl-1">, </span><span class="hl-8">&#39;&#39;</span><span class="hl-1">))) {</span><br/><span class="hl-1">        </span><span class="hl-0">throw</span><span class="hl-1"> </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">Error</span><span class="hl-1">(</span><span class="hl-8">&#39;Name is not valid.&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }, </span><br/><br/><span class="hl-1">  </span><span class="hl-4">desc:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-4">String</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">trim:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">  },</span><br/><br/><span class="hl-1">  </span><span class="hl-4">color:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-4">String</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">required:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">enum:</span><span class="hl-1"> [</span><span class="hl-8">&#39;blue&#39;</span><span class="hl-1">, </span><span class="hl-8">&#39;green&#39;</span><span class="hl-1">, </span><span class="hl-8">&#39;red&#39;</span><span class="hl-1">, </span><span class="hl-8">&#39;black&#39;</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-4">trim:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">  },</span><br/><br/><span class="hl-1">  </span><span class="hl-4">price:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-4">Number</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">required:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">trim:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-6">validate</span><span class="hl-4">:</span><span class="hl-1"> (</span><span class="hl-4">value</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">if</span><span class="hl-1">(!(</span><span class="hl-4">value</span><span class="hl-1"> &gt;= </span><span class="hl-13">0</span><span class="hl-1">)) {</span><br/><span class="hl-1">        </span><span class="hl-0">throw</span><span class="hl-1"> </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">Error</span><span class="hl-1">(</span><span class="hl-8">&#39;Price must be positive&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">})</span>
</code><button>Copy</button></pre>
<p>Como podemos observar, el nombre se estipula como un tipo string, es un parámetro requerido y se le activa la opción <code>trim</code> para eliminar los espacios innecesarios al insertarlo. También se desarrolla un validator, haciendo uso del módulo con el mismo nombre, implementando el método <code>validate</code>. En este caso se comprueba si el nombre está compuesto de caracteres alfabéticos y/o espacios, utilizando el método <code>isAlpha</code> del módulo <code>validator</code> y sustituyendo los caracteres de espacio por caracteres vacíos. Esto no compromete la integridad de los datos ya que es solo dentro del <code>validator</code>. A continuación, vemos que la descripción también es de tipo string y también se le aplica <code>trim</code> pero en este caso no es un campo requerido, ya que se considera información adicional no necesaria. En tercer lugar, vemos que el color se estipula como string y se le aplica <code>trim</code>, además de ser un campo requerido, pero también se estipula como un valor enumerado que solo puede tomar los valores estipulados en el campo <code>enum</code>. Por último, el precio es un valor de tipo number, requerido, trimeado y con un <code>validator</code> que impide que sea un número negativo ya que no tendría sentido dentro de nuestro caso.</p>
<p>Tras el desarrollo del <code>Schema</code> se crea el modelo haciendo uso del mismo:</p>
<pre><code class="language-typescript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-5">Furniture</span><span class="hl-1"> = </span><span class="hl-6">model</span><span class="hl-1">&lt;</span><span class="hl-3">FurnituresDocumentInterface</span><span class="hl-1">&gt;(</span><span class="hl-8">&#39;Furniture&#39;</span><span class="hl-1">, </span><span class="hl-4">FurnitureSchema</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<a id="md:transaction" class="tsd-anchor"></a><h3><a href="#md:transaction">Transaction</a></h3><br>

<a id="md:rutas" class="tsd-anchor"></a><h2><a href="#md:rutas">Rutas</a></h2><p>La API tiene diferentes rutas, para gestionar los diferentes tipos de solicitudes que se le presentarán a una tienda de muebles. Las rutas implementadas son 4:</p>
<ul>
<li>Clientes: <code>/customers</code></li>
<li>Proveedores: <code>/providers</code></li>
<li>Muebles: <code>/furnitures</code></li>
<li>Transacciones: <code>/transactions</code></li>
</ul>
<a id="md:clientes-customers" class="tsd-anchor"></a><h3><a href="#md:clientes-customers">Clientes: <code>/customers</code></a></h3><p>Ruta encargada de los clientes de la tienda. Hace uso del modelo <code>Customer</code> explicado anteriormente para la gestión de los datos y la comunicación con la base de datos mediante <code>mongoose</code>. Para ello se crea el <strong>router</strong> de express <code>customerRouter</code>:</p>
<pre><code class="language-typescript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-5">customerRouter</span><span class="hl-1"> = </span><span class="hl-4">express</span><span class="hl-1">.</span><span class="hl-6">Router</span><span class="hl-1">()</span>
</code><button>Copy</button></pre>
<p>A partir de él se definen las diferentes acciones bajo la ruta <code>/customers</code> con los diferentes verbos <strong>HTTP</strong>.</p>
<a id="md:post" class="tsd-anchor"></a><h4><a href="#md:post">POST</a></h4><p>Esta acción permite la creación de nuevos clientes, donde, si existe algún error, devuelve un código de <em>500</em>; en un caso satisfactorio devuelve <em>201</em> y el cliente incorporado a la base de datos.</p>
<a id="md:get" class="tsd-anchor"></a><h4><a href="#md:get">GET</a></h4><p>Acción que permite obtener clientes concretos, esto se puede hacer a través de la id, con una ruta dinámica(<code>&#39;/customers/:id&#39;</code>), o a través de un nif. Esta acción puede devolver 404(<em>si el cliente no se encontró</em>), 500(<em>si hay algún error</em>) o el cliente buscado(<em>en caso de éxito</em>).</p>
<a id="md:patch" class="tsd-anchor"></a><h4><a href="#md:patch">PATCH</a></h4><p>La acción de modificación, al igual que el <em>GET</em>, permite trabajar con la ruta dinámica, con su id, o su nif. <em>PATCH</em> establece una serie de atributos que se pueden modificar(<code>[&#39;name&#39;, &#39;phone&#39;, &#39;address&#39;]</code>) y, en caso de que la modificación sea valida, devuelve el objeto modificado(<em>si no se encuentra el cliente, hay algún error o no se permite la modificación se devuelve 404, 500 o 400, respectivamente</em>).</p>
<a id="md:delete" class="tsd-anchor"></a><h4><a href="#md:delete">DELETE</a></h4><p>Esta acción actúa similar que el <em>GET</em> pudiendo trabajar con su id o su nif y devolviendo <em>404</em> o el cliente borrado, según corresponda.</p>
<a id="md:proveedores-providers" class="tsd-anchor"></a><h3><a href="#md:proveedores-providers">Proveedores: <code>/providers</code></a></h3><p>Ruta encargada de los proveedores de la tienda. Hace uso del modelo <code>Provider</code> explicado anteriormente para la gestión de los datos y la comunicación con la base de datos mediante <code>mongoose</code>. Para ello se crea el <strong>router</strong> de express <code>customerRouter</code>:</p>
<pre><code class="language-typescript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-5">providerRouter</span><span class="hl-1"> = </span><span class="hl-4">express</span><span class="hl-1">.</span><span class="hl-6">Router</span><span class="hl-1">()</span>
</code><button>Copy</button></pre>
<p>A partir de él se definen las diferentes acciones bajo la ruta <code>/providers</code> con los diferentes verbos <strong>HTTP</strong>. Estas acciones se programan de la misma manera que customers, lo único que cambia es sustituir el nif por cif donde se requiera.</p>
<a id="md:muebles-furnitures" class="tsd-anchor"></a><h3><a href="#md:muebles-furnitures">Muebles: <code>/furnitures</code></a></h3><p>Ruta encargada de los muebles de la tienda. Hace uso del modelo <code>Furniture</code> explicado anteriormente para la gestión de los datos y la comunicación con la base de datos mediante <code>mongoose</code>. Para ello se crea el <strong>router</strong> de express <code>furnitureRouter</code>:</p>
<pre><code class="language-typescript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-5">furnitureRouter</span><span class="hl-1"> = </span><span class="hl-4">express</span><span class="hl-1">.</span><span class="hl-6">Router</span><span class="hl-1">();</span>
</code><button>Copy</button></pre>
<p>A partir de él se definen las diferentes acciones bajo la ruta <code>/furnitures</code> con los diferentes verbos <strong>HTTP</strong>.</p>
<a id="md:post-1" class="tsd-anchor"></a><h4><a href="#md:post-1">POST</a></h4><p>Esta es la más sencilla de las operaciones bajo la ruta <code>/furnitures</code>. Se encarga de las operaciones de creación a partir de las solicitudes HTTP que recibe la API, se crea una nueva instancia del modelo a partir del cuerpo de la petición (<em>req.body</em>), de esta manera ya pasa por todos los parámetros y validadores que definimos en el modelo, tras ello mediante una estructura <em>try-catch</em> se intenta guardar en la base de datos haciendo uso del método <code>.save()</code> de <code>mongoose</code>, en caso de éxito se devuelve una respuesta con status 201 al cliente y en el cuerpo de la respuesta el documento de la base de datos recién creado. En caso de error, se devuelve una respuesta con estado 500 y el error en el cuerpo de la respuesta.</p>
<a id="md:get-1" class="tsd-anchor"></a><h4><a href="#md:get-1">GET</a></h4><p>Esta es la operación encargada de la lectura de la base de datos. Funciona de 3 maneras:</p>
<ol>
<li>Si no se le pasa nada en la <em>query string</em> o la id de la base de datos como parámetro dinámico: devuelve todos los documentos de la base de datos bajo la ruta <code>/furnitures</code></li>
<li>Si se le pasa por la <em>query string</em> el nombre, la descripción, el precio, el color o cualquier combinación de estos: devuelve los documentos de la base de datos que coincidan con los filtros impuestos</li>
<li>Si se le pasa la <code>_id</code> de la base de datos como parámetro dinámico en la dirección de la petición: devuelve el objeto que corresponde a esa <code>_id</code>.</li>
</ol>
<p>Para conseguir el funcionamiento de los dos primeros casos se ha desarrollado la interfaz <code>FurnitureFilter</code>, que tiene como atributos opcionales: name, desc, color y price. De manera que se pueden dar todos, ninguno o cualquier combinación de ellos y todas serán opciones válidas. En el manejador de la ruta <code>/furnitures</code>, se crea un filtro <code>FurnitureFilter</code> vacío, tras ello se comprueba la <em>query string</em> para buscar <code>name</code>, <code>desc</code>, <code>color</code> o <code>price</code> en caso de encontrarlos, se asignan al parámetro del mismo nombre dentro del filtro. En caso de no encontrar ninguno se queda vacío. Este filtro se utiliza por último en el método <code>find</code> del modelo <code>Furniture</code> para buscar en la base de datos las coincidencias, en caso de encontrarlas se envían al cliente en la respuesta. En caso de que la longitud sea 0, que no se encontraran, se envía una respuesta con estado 404.</p>
<p>Para el último de los casos, se crea otro manejador para la ruta <code>/furnitures/:id</code>, donde <code>:id</code> es un parámetro dinámico. Este manejador hace uso del método <code>findById</code> del modelo para buscar el objeto que coincide con la <code>id</code> dada como parámetro dinámico. En caso de encontrarlo, lo devuelve en la respuesta y en caso contrario devuelve 404.</p>
<a id="md:patch-1" class="tsd-anchor"></a><h4><a href="#md:patch-1">PATCH</a></h4><p>Esta es la operación encargada de la modificación de la base de datos. Funciona de manera similar a <code>GET</code>, se le puede pasar por la <em>query string</em> cualquier combinación de los atributos de un mueble o pasar la id del objeto a modificar como parámetro dinámico. Ambos métodos son válidos para encontrar el objeto a modificar. </p>
<p>En el primero de los casos funciona de la misma manera que el manejador del <code>GET</code> utilizando <code>FurnitureFilter</code>, tras crear el filtro se crea el array de las modificaciones permitidas (<em>allowedUpdates</em>), y el array de las modificaciones dadas en el cuerpo de la petición (<em>actualUpdates</em>), tras ello se comparan entre sí y el resultado se guarda en el booleano <em>isValidUpdate</em>, en caso de este valor estar a <strong>true</strong> se busca el mueble a modificar mediante el método <code>findOneAndUpdate</code> del modelo y se le proporciona el filtro para encontrarlo, el cuerpo de la petición con las modificaciones y las opciones (en nuestro caso: <code>new: true</code> y <code>runValidators: true</code>). En caso de tener éxito se devuelve el mueble modificado en la respuesta y en caso de no encontrarse se devuelve un 404. </p>
<p>Para el segundo de los casos se ejecuta de la misma manera que el caso anterior, solo que sin necesidad de crear el filtro y solo haciendo uso del parámetro dinámico <code>:id</code> dado. De esta forma se usa el método <code>findByIdAndUpdate</code> del modelo y se le pasa el id, el cuerpo de la petición y las opciones, que son las mismas que en el primer caso.</p>
<a id="md:delete-1" class="tsd-anchor"></a><h4><a href="#md:delete-1">DELETE</a></h4><p>Esta es la última de las operaciones desarrolladas, encargada de la eliminación de la base de datos. El manejador funciona de manera similar a los dos anteriores para buscar mediante la combinación de parámetros en la <em>query string</em> o mediante el id de la base de datos dado como parámetro dinámico. </p>
<p>Para el primero de los casos se hace uso de manera similar a las anteriores de <code>FurnitureFilter</code> y luego hace uso del método <code>findOneAndDelete</code> del modelo, al que se le pasa el filtro y borra la primera coincidencia con el mismo de la base de datos. En caso de que no encuentre ninguna coincidencia (la variable donde se guarda el resultado del método es <em><strong>undefined</strong></em>), se devuelve un 404. En caso de que se encuentre, se devuelve el objeto borrado en la respuesta.</p>
<p>Para el otro caso, se hace uso del método <code>findByIdAndDelete</code> del modelo, pasándole la id dada como parámetro dinámico y devuelve el objeto borrado en la respuesta en caso de tener éxito, y una respuesta 404 en caso contrario.</p>
<a id="md:transactions-transactions" class="tsd-anchor"></a><h3><a href="#md:transactions-transactions">Transactions: <code>/transactions</code></a></h3><br>

<a id="md:test" class="tsd-anchor"></a><h2><a href="#md:test">Test</a></h2><ol>
<li>Instalamos las dependencias necesarias</li>
</ol>
<pre><code><span class="hl-4">npm</span><span class="hl-1"> </span><span class="hl-4">i</span><span class="hl-1"> --</span><span class="hl-4">save</span><span class="hl-1">-</span><span class="hl-4">dev</span><span class="hl-1"> </span><span class="hl-4">mocha</span><span class="hl-1"> @</span><span class="hl-4">types</span><span class="hl-1">/</span><span class="hl-4">mocha</span><span class="hl-1"> </span><span class="hl-4">chai</span><span class="hl-1"> @</span><span class="hl-4">types</span><span class="hl-1">/</span><span class="hl-4">chai</span><br/><span class="hl-4">npm</span><span class="hl-1"> </span><span class="hl-4">i</span><span class="hl-1"> --</span><span class="hl-4">save</span><span class="hl-1">-</span><span class="hl-4">dev</span><span class="hl-1"> </span><span class="hl-4">ts</span><span class="hl-1">-</span><span class="hl-4">node</span><br/><span class="hl-4">npm</span><span class="hl-1"> </span><span class="hl-4">i</span><span class="hl-1"> --</span><span class="hl-4">save</span><span class="hl-1">-</span><span class="hl-4">dev</span><span class="hl-1"> </span><span class="hl-4">supertest</span><span class="hl-1"> @</span><span class="hl-4">types</span><span class="hl-1">/</span><span class="hl-4">supertest</span>
</code><button>Copy</button></pre>
<ol start="2">
<li>Ejecución de test</li>
</ol>
<ul>
<li>Tener activado mongo</li>
</ul>
<pre><code><span class="hl-4">wget</span><span class="hl-1"> </span><span class="hl-14">https</span><span class="hl-1">:</span><span class="hl-7">//fastdl.mongodb.org/linux/mongodb-linux-x86_64-ubuntu2204-7.0.8.tgz</span><br/><span class="hl-4">tar</span><span class="hl-1"> </span><span class="hl-4">xzvf</span><span class="hl-1"> </span><span class="hl-4">mongodb</span><span class="hl-1">-</span><span class="hl-4">linux</span><span class="hl-1">-</span><span class="hl-4">x86_64</span><span class="hl-1">-</span><span class="hl-4">ubuntu2204</span><span class="hl-1">-</span><span class="hl-13">7.0</span><span class="hl-1">.8.</span><span class="hl-4">tgz</span><br/><span class="hl-4">rm</span><span class="hl-1"> </span><span class="hl-4">mongodb</span><span class="hl-1">-</span><span class="hl-4">linux</span><span class="hl-1">-</span><span class="hl-4">x86_64</span><span class="hl-1">-</span><span class="hl-4">ubuntu2204</span><span class="hl-1">-</span><span class="hl-13">7.0</span><span class="hl-1">.8.</span><span class="hl-4">tgz</span><span class="hl-1"> </span><br/><span class="hl-4">mv</span><span class="hl-1"> </span><span class="hl-4">mongodb</span><span class="hl-1">-</span><span class="hl-4">linux</span><span class="hl-1">-</span><span class="hl-4">x86_64</span><span class="hl-1">-</span><span class="hl-4">ubuntu2204</span><span class="hl-1">-</span><span class="hl-13">7.0</span><span class="hl-1">.</span><span class="hl-13">8</span><span class="hl-1">/ </span><span class="hl-4">mongodb</span><br/><span class="hl-4">mkdir</span><span class="hl-1"> </span><span class="hl-4">mongodb</span><span class="hl-1">-</span><span class="hl-4">data</span><span class="hl-1">  </span><br/><br/><span class="hl-4">sudo</span><span class="hl-1"> /</span><span class="hl-4">home</span><span class="hl-1">/</span><span class="hl-4">usuario</span><span class="hl-1">/</span><span class="hl-4">mongodb</span><span class="hl-1">/</span><span class="hl-4">bin</span><span class="hl-1">/</span><span class="hl-4">mongod</span><span class="hl-1"> --</span><span class="hl-4">dbpath</span><span class="hl-1"> /</span><span class="hl-4">home</span><span class="hl-1">/</span><span class="hl-4">usuario</span><span class="hl-1">/</span><span class="hl-4">mongodb</span><span class="hl-1">-</span><span class="hl-4">data</span><span class="hl-1">/ </span>
</code><button>Copy</button></pre>
<ul>
<li>Tener diferentes entornos(para poder trabajar en las pruebas con la base de dadots de pruebas por ejemplo)</li>
</ul>
<pre><code><span class="hl-4">npm</span><span class="hl-1"> </span><span class="hl-4">i</span><span class="hl-1"> --</span><span class="hl-4">save</span><span class="hl-1">-</span><span class="hl-4">dev</span><span class="hl-1"> </span><span class="hl-4">env</span><span class="hl-1">-</span><span class="hl-4">cmd</span>
</code><button>Copy</button></pre>
<p>  fichero config/test.env:</p>
<pre><code><span class="hl-5">PORT</span><span class="hl-1">=</span><span class="hl-13">3000</span><br/><span class="hl-5">MONGODB_URL</span><span class="hl-1">=</span><span class="hl-14">mongodb</span><span class="hl-1">:</span><span class="hl-7">//127.0.0.1:27017/magic-apirest-test</span>
</code><button>Copy</button></pre>
<p>  package.json:</p>
<pre><code class="language-json"><span class="hl-8">&quot;dev&quot;</span><span class="hl-1">: </span><span class="hl-8">&quot;tsc-watch --onSuccess </span><span class="hl-15">\&quot;</span><span class="hl-8">env-cmd -f ./config/dev.env node dist/main.js</span><span class="hl-15">\&quot;</span><span class="hl-8">&quot;</span><span class="hl-1">,</span><br/><span class="hl-8">&quot;test&quot;</span><span class="hl-1">: </span><span class="hl-8">&quot;env-cmd -f ./config/test.env mocha --exit&quot;</span><span class="hl-1">,</span><br/><span class="hl-8">&quot;coverage&quot;</span><span class="hl-1">: </span><span class="hl-8">&quot;c8 npm test &amp;&amp; c8 report --reporter=lcov&quot;</span>
</code><button>Copy</button></pre>
<ul>
<li>Se ejecutan los test con <em>npm run test</em></li>
</ul>
<br>

<a id="md:despliegue" class="tsd-anchor"></a><h2><a href="#md:despliegue">Despliegue</a></h2><p>LINK DEPLOY:
<a href="https://magic-card-pout.onrender.com">https://magic-card-pout.onrender.com</a></p>
<br>

<a id="md:conclusión" class="tsd-anchor"></a><h2><a href="#md:conclusión">Conclusión</a></h2><p>En conclusión, has sido una práctica interesante debido al trabajo con diferentes herramientas como <em>Moongose atlas</em> o <em>cyclic</em>, que nos han permitido desplegar nuestra API REST en un entorno más cercano al de producción de una aplicación real. Las principales dificultades fueron encontradas en el entorno de las transacciones, debido a los problemas para gestionar las operaciones en cascada y al cómo gestionar el schema de forma correcta.</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-index-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><h4 class="uppercase">Member Visibility</h4><form><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div><div class="tsd-theme-toggle"><h4 class="uppercase">Theme</h4><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-index-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:práctica-13---dsikea-api-rest-con-nodeexpress"><span>Práctica 13 -<wbr/> DSIkea: API REST con <wbr/>Node/<wbr/>Express</span></a><ul><li><a href="#md:integrantes-del-grupo"><span>Integrantes del <wbr/>Grupo</span></a></li><li><a href="#md:introducción"><span>Introducción</span></a></li><li><a href="#md:modelos"><span>Modelos</span></a></li><li><ul><li><a href="#md:customer"><span>Customer</span></a></li><li><a href="#md:provider"><span>Provider</span></a></li><li><a href="#md:furniture"><span>Furniture</span></a></li><li><a href="#md:transaction"><span>Transaction</span></a></li></ul></li><li><a href="#md:rutas"><span>Rutas</span></a></li><li><ul><li><a href="#md:clientes-customers"><span>Clientes: /customers</span></a></li><li><ul><li><a href="#md:post"><span>POST</span></a></li><li><a href="#md:get"><span>GET</span></a></li><li><a href="#md:patch"><span>PATCH</span></a></li><li><a href="#md:delete"><span>DELETE</span></a></li></ul></li><li><a href="#md:proveedores-providers"><span>Proveedores: /providers</span></a></li><li><a href="#md:muebles-furnitures"><span>Muebles: /furnitures</span></a></li><li><ul><li><a href="#md:post-1"><span>POST</span></a></li><li><a href="#md:get-1"><span>GET</span></a></li><li><a href="#md:patch-1"><span>PATCH</span></a></li><li><a href="#md:delete-1"><span>DELETE</span></a></li></ul></li><li><a href="#md:transactions-transactions"><span>Transactions: /transactions</span></a></li></ul></li><li><a href="#md:test"><span>Test</span></a></li><li><a href="#md:despliegue"><span>Despliegue</span></a></li><li><a href="#md:conclusión"><span>Conclusión</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="index.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>modp10</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>